var knx = require("knx");

var myknxhealthconnection = knx.Connection({
	//ipAddr: "192.168.0.30",
	//ipPort: "3671",
	//debug: true,
	//interface: 'eth0',
	//useMulticastTunneling: true,
	//physAddr: process.env.KNX_SOURCEADDRESS,
	handlers: {
		connected: function() {
			function checkdp() {
				var dp = new knx.Datapoint({
					ga: "0/1/1",
					dpt: "DPT1"
				}, myknxhealthconnection);
				dp.read((src, value) => {
					console.log("**** HEALTHCHECK : success, GA %j reports current value: %j", dp.ga.toString(), value);
					//process.exit(0);
				});
				console.log("HEALTHCHECK : error, connection to KNX bus and/or healthcheck group address timed out");
				//process.exit(1);
			}
			checkdp();
			//setTimeout(checkdp, 2000);
		}
	}
});
